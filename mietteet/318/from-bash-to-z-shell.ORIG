<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


        <!-- standard -->
	<title>Mr. P: From Bash to Z Shell</title>


	<link rel="home" href="../../index.html" />

	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="../../atom/index.html?section=mietteet" />
	<link rel="alternate" type="application/rss+xml" title="RSS 0.92" href="../../rss/index.html?section=mietteet" />

	<link rel="stylesheet" type="text/css" media="screen" href="../../blog.css" />
        <link rel="stylesheet" type="text/css" href="../../codeblock.css" />

            <!-- SyntaxHighlighter: http://alexgorbatchev.com -->
    <script type="text/javascript" src="../../scripts/xregexp-min.js"></script>
    <script type="text/javascript" src="../../scripts/shCore.js"></script>
    <!-- langs -->
    <script type="text/javascript" src="../../scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPerl.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushClojure.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushHaskell.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushVimscript.js"></script>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../rpc/index.html" />
</head>

<body id="mietteet">

<!-- accessibility -->
<div id="accessibility">
    <ul>
        <li><a href="from-bash-to-z-shell#content">Siirry sisältöön</a></li>
        <li><a href="from-bash-to-z-shell#sidebar-2">Siirry hakuun</a></li>
    </ul>
</div>

<div id="container">

<!-- head -->
    <div id="head">
        <h1 id="site-name"><a rel="home" href="../../index.html">Mr. P</a></h1>
        <p id="site-slogan">Asiaa porjoilun tuolta puolen</p>
    </div>

<!-- right -->
    <div id="sidebar-2">
        <ul class="section_list">
	<li>
            
            <a href="../../hetket/index.html">Hetkessä</a>
            
        </li>
	<li>
            
            <a href="../../matematiikka/index.html">Matematiikka</a>
            
        </li>
	<li>
            &raquo;
            <a href="../index.html">Mietteet</a>
            
                <!--<ul>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/598/blogille-idea">Blogille&#160;idea</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/597/wes-mckinney-python-for-data-analysis-oreilly">Wes McKinney - Python For Data Analysis (O&#39;Reilly)</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/596/org-blogaaminen-vaikeata">Org-blogaaminen&#160;vaikeata</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/595/twitterointia-emacsilla">Twitteröintiä&#160;Emacsilla</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/594/weboodi-aikataulut-orgiin">WebOodi-aikataulut&#160;orgiin</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/593/emacsin-salat-alkavat-selvita-org-kovenee-ja-muita-tarinoita">Emacsin salat alkavat selvitä; org kovenee ja muita&#160;tarinoita</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/592/emacs-has-me">Emacs has&#160;me.</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/591/editorien-taistelu-tietamyshallinnassa">Editorien taistelu&#160;tietämyshallinnassa</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/590/think-vimorganizer">Think&#160;VimOrganizer.</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="http://progo.viuhka.fi/mietteet/589/think-orgmode">Think&#160;orgmode.</a>
                </li>
</ul>-->
            
        </li>
</ul>
<!--        <p class="sidebarhead">Aiheita:</p>
        <ul class="category_list">
	<li><a href="http://progo.viuhka.fi/kategoria/hifi/">Hifi</a></li>
	<li><a href="http://progo.viuhka.fi/kategoria/koodaus/">Ohjelmointi</a></li>
	<li><a href="http://progo.viuhka.fi/kategoria/ohjelmistot/">Ohjelmistot</a></li>
	<li><a href="http://progo.viuhka.fi/kategoria/Opiskelu/">Opiskelu</a></li>
	<li><a href="http://progo.viuhka.fi/kategoria/rauta/">Rauta</a></li>
	<li><a href="http://progo.viuhka.fi/kategoria/viihde/">Viihde</a></li>
	<li><a href="http://progo.viuhka.fi/kategoria/Yleistae-turinaa/">Yleistä turinaa</a></li>
</ul> -->

        <p class="sidebarhead">Valikoituja aiheita:</p>
        <ul class="category_list">
	<li><a href="../../tag/clojure/index.html" class="tagSizeSmallest tagSize1" style="font-size: 100%;">clojure</a></li>
	<li><a href="../../tag/hifi/index.html" class="tagSizeMedium tagSize31" style="font-size: 100%;">hifi</a></li>
	<li><a href="../../tag/ohjelmointi/index.html" class="tagSizeLargest tagSize42" style="font-size: 100%;">ohjelmointi</a></li>
	<li><a href="../../tag/palvelin/index.html" class="tagSizeMedium tagSize37" style="font-size: 100%;">palvelin</a></li>
	<li><a href="../../tag/pelaaminen/index.html" class="tagSizeMedium tagSize2" style="font-size: 100%;">pelaaminen</a></li>
	<li><a href="../../tag/python/index.html" class="tagSizeSmallest tagSize1" style="font-size: 100%;">python</a></li>
	<li><a href="../../tag/rauta/index.html" class="tagSizeMedium tagSize23" style="font-size: 100%;">rauta</a></li>
	<li><a href="../../tag/vim/index.html" class="tagSizeMedium tagSize34" style="font-size: 100%;">vim</a></li>
</ul>
        <p><a href="../../tag/index.html">Kaikki tagit</a></p>

        <form method="get" action="../../index.html">
<p class="search_input">Hae<br /><input type="text" value="" name="q" size="15" /></p>
</form>

        <p><a href="../../rss/index.html?section=mietteet" title="RSS 0.92">RSS</a> / <a href="../../atom/index.html?section=mietteet" title="Atom 1.0">Atom</a></p>
        <p class="linklist"><a href="http://textpattern.net/">TextBook</a><br /><a href="http://textpattern.com/">Textpattern</a><br /><a href="http://textpattern.org/">Txp Resources</a><br /><a href="http://twitter.com/progo_" title="Twitter-profiilini">Twitter</a><br /></p>

        <p><a href="http://textpattern.com/"><img src="../../images/2.png" alt="Textpattern CMS" width="105" height="45" /></a></p>
    </div>


<!-- center -->
    <div id="content">



<!-- not tag view, it's the main view -->


        

        <div class="hfeed">
            <!-- five articles to list here, or only one. It depends. -->
            <!-- default form -->

<p class="published"> 2. toukokuu 2010, 10:19</p>
<h1 class="entry-title"><a rel="bookmark" href="from-bash-to-z-shell">From Bash to Z&#160;Shell</a></h1>


<div class="entry-content">
	<p>Laitoin suosituksesta sellaista kirjaa tulemaan. Mukava reilu 400-sivuinen eepos nimensämukaisesti kahdesta eniten käytetystä shellistä. Ajattelin hallita systeemiä kokonaisuudessaan, joten nyt on aika hakea taustatykistöä näinkin radikaalista ympäristöstä.</p>

	<p>Kyselin <span class="caps">ZSH</span>:n postilistoilta tuosta kontekstitietoisesta tiedostojen täydentämisestä, ja sainkin jo alustavia tuloksia joihinkin ongelmiin. En kuitenkaan kaikkeen. Samalla eräs osaava kirjailija suositteli mainittua kirjaa <a href="http://www.amazon.co.uk/exec/obidos/ASIN/1590593766/ref=ox_ya_os_product">From Bash to Z Shell: Conquering the Command Line</a> ja kun se irtoaa posteineen 17 eurolla, mikä ettei tilata? Minua on edelleen kalvanut hieman tuo bashista siirtyminen pois, mutta joskushan se pitää kai tehdä? Ehh.. jos ajatellaan kaikki korkean tason shellit (joihin voidaan ainakin nämä kaksi lukea) sellaisiksi, että ne voidaan kustomoida prikulleen siten, kuten itse haluaa, eihän tässä ole sitten muuta kuin valita mieleinen. Pikkuseikat lisäksi vaikuttavat: bashin käyttämä <code>readline</code> ei siis tue sellaista ajatusta, että syötteen modaalisuus ilmoitetaan shellille itselleen väliaikaisesti. Sellainen toimii kuitenkin zsh:ssa, ja ehkä se yksityiskohta voi riittää toistaiseksi valintaani.</p>

	<p>Ennen kirjaakin ajattelin saada tiedostotäydentelyyn lisämukavaa. Zsh:n heikko puoli on aika kovantasoinen epäselvyys (josta ei kyllä bashikaan puhtain paperein pääse läpi) näihin asioihin liittyen. Se ei ole myöskään niin suosittu, joten erilaisten dokumenttien määrä verkossa on astetta heikompi. Siihenpä epäkohtaan tuo kirjanen luultavasti auttaa oikein mojovasti. Annetaan kuitenkin eräs maistiainen, joka luultavasti onnistuisi myös bashissa, mutten koskaan tohtinut vaivautua:</p>

<pre><code>zstyle &#39;:completion:*:(xpdf|epdfview|okular):*&#39; file-patterns \
  &#39;*.(pdf|ps):readable-files *(-/):directories&#39; &#39;*:all-files&#39;
</code></pre>

	<p>Älkää kysykö kaikista yksityiskohdista: sen vain tiedän, että nyt se toimii <strong><span class="caps">PDF</span>-lukijain</strong> osalta siten, kuten kuuluukin. Eli kolmea käyttämääni lukijaa varten helpottamaan on asetettu ehto, että täydennetään niille vain kahdenlaisia olioita: joko tiedostoja, joiden pääte on <code>pdf</code> tai <code>ps</code>, tai hakemistoja. Tuo koodi ei mahdollista minkään muun täydentämistä, joten se on hyvin epätäydellinen. Aina tulisi tarjota lopuksi mahdollisuus täydentää niitä muita tiedostoja, jotka eivät sovikaan muottiin. </p>

	<p>Ajatellaan vaikka tapaus <code>mplayer</code>. Sinne voisi samanlaiseen sävyyn asettaa avi-, mkv-, mpeg- ja mov-tiedostot täydennettäväksi, mutta entäs jos joku video onkin vaikka <span class="caps">VOB</span>? Tai vaikka listaan asetettaisiin kaikki tunnetut videopäätteet kautta maan, joku video olisi ilman päätettä, esimerkiksi streamin dumppauksen ohessa? Ainut ratkaisu olisi olla käyttämättä sitä täydennystä lainkaan. Eli täydennykseen pitää saada sellainen prioriteettijärjestelmä. Oletetaan nyt vaikka tämä mplayer. Sille voi täydentää mitä hyvänsä, mutta prioriteettina on oltava tunnetut videotiedostopäätteet. Kun ne on ensin koluttu läpi, sitten shellin pitäisi tarjoilla niitä loppuja. </p>

	<p>Samanlainen logiikka sitten vimille. Oletetaan tyypillinen LaTeX-hakemisto: </p>

<pre><code>graftesti.aux
graftesti.log
graftesti.pdf
graftesti.tex
</code></pre>

	<p>Näistä tiedostoista <code>aux</code> ja <code>log</code> ovat varsin hyödyttömiä. <span class="caps">PDF</span>:ää taas ei ole mielekästäkään lukea vimillä. Selvästi <code>tex</code>-päätteisten tiedostojen tulisi olla vimin täydennyslistoilla prioriteettina, mutta koska vim on hyvin yleispätevä editori, mitään ei saisi sulkea pois. Ei ainuttakaan tiedostoa tahi päätettä. Edellä mainittu skeema ei siis ole täydellinen. Zsh:n ohjeita lukemalla ei pääse viisastumaan, sillä se toimii korkeintaan referenssinä opitulle. Tulen palaamaan aiheeseen kirjasen myötä. Siinä vaiheessa oltaneen jo kesälomilla. </p>
</div>

<p class="tags"> 


Tageja: <a href="../../tag/bash/index.html" rel="tag">bash</a>, 
<a href="../../tag/zsh/index.html" rel="tag">zsh</a>


</p>



<div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>


        </div>

 <!-- now, common stuff -->

        <div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>

        <p><a rel="prev" href="../313/hyvaa-vappua" title="Hyvää vappua.">&#171; Hyvää vappua.</a> 
           &mdash; <a rel="next" href="../322/meng-mini-p1" title="Meng Mini P1">Meng Mini P1 &#187;</a>
        </p>

        <div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>
        <h2>Aiheen vierestä</h2>
        <ul class="directory">

<li><span class="entry-title"><a rel="bookmark" href="../590/think-vimorganizer">Think&#160;VimOrganizer.</a></span> &#183; <span class="published">2012-09-02</span>
<br /><span class="smallexcerpt">Asiat rullaavat eteenpäin tyydyttävää tahtia tämän uuden tiedonhallinnan kanssa. Nyt olen säätänyt kuntoon jokaisesta kulmasta toimivan org-capture -variantin, jolla saan...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../571/tv-saato-on-nyt-valmis">TV-säätö on nyt&#160;valmis</a></span> &#183; <span class="published">2012-03-23</span>
<br /><span class="smallexcerpt">No niin. Uuden NVidia-kortin ansiosta TV-episodi on käsitelty voitokkaasti. Jos rahalla asiasta selviämistä ei lasketa huijaamiseksi.

	Oppirahoja tuli taas tosiaankin hassattua....</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../569/satunnaiset-jazzit-soittolistalta">Satunnaiset jazzit&#160;soittolistalta</a></span> &#183; <span class="published">2012-03-18</span>
<br /><span class="smallexcerpt">Jonkin aikaa sitten kirjailin nopean bash-skriptin, joka hakee haluamastaan MPD-soittolistasta tietyn verran kappaleita. Siten, että musiikkia saadaan noin tietyn aikarajan...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../547/pieni-tiedostolistausapu">Pieni&#160;tiedostolistausapu</a></span> &#183; <span class="published">2011-09-04</span>
<br /><span class="smallexcerpt">Pitäisi viritellä joku zsh-funktio tekemään seuraavanlaisia tiedostolistauksia nykyisestä hakemistosta:

$ ls -1
foo.txt
bar.txt
paperi.tex
vanhapaperi.tex.gz
$ l .txt
foo.txt
bar.txt
$ l peri
paperi.tex
vanhapaperi.tex.gz
$ l v*p
vanhapaperi.tex.gz
$ ls $files
vanhapaperi.tex.gz


	Eli sen...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../542/git-repon-aktiivisuus-graafiksi">Git-repon aktiivisuus&#160;graafiksi</a></span> &#183; <span class="published">2011-08-15</span>
<br /><span class="smallexcerpt">Tässä erilaisten projektien loukussa löysin itselleni pienen hengähdystauon kirjoittaessani bash-gnuplot -kaksikon, missä tutkin git-repojen aktiivisuutta graafin muodossa. Varmaan git gui...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../522/symlinkit-oikeiksi-tiedostoiksi-parantelua">Symlinkit oikeiksi tiedostoiksi:&#160;parantelua</a></span> &#183; <span class="published">2011-04-03</span>
<br /><span class="smallexcerpt">Edellisessä jutussa hahmottelin alustavan rakennelman. Tällä kertaa se pitää parantaa loppuunsa lisäämällä argumentteja ja argumenttien hallintaa skriptiin. Kryptiset getopt-koodit aukesivat...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../519/symlinkit-oikeiksi-tiedostoiksi">Symlinkit oikeiksi&#160;tiedostoiksi</a></span> &#183; <span class="published">2011-03-25</span>
<br /><span class="smallexcerpt">Onko tullut joskus tarvetta muuntaa hakemistollinen symlinkkejä oikeiksi tiedostoiksi, jotta voisi poistaa tiedostot niiden alkuperäisessä paikassaan? Yllättäen tätä varten piti...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../517/zsh-syntaksivarityksella">ZSH&#160;syntaksivärityksellä!</a></span> &#183; <span class="published">2011-03-09</span>
<br /><span class="smallexcerpt">Tajusin eräs kaunis päivä, että ZSH voisi oman tekstinsyöttökoneensa ansiosta tukea myös reaaliaikaista syntaksivärjäystä. Komentokehote ottaa koodikieltä vastaan, joten miksi...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../354/bash-skriptailua-ja-vareja">Bash-skriptailua ja&#160;värejä</a></span> &#183; <span class="published">2010-11-22</span>
<br /><span class="smallexcerpt">Taas tuli esille pieni tarve kirjoittaa bash-skriptinpalasta, ja nyt tuntuu sujuvan vain paremmin kuin koskaan ennen. Sopivan värilistauksen ansiosta myös...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../305/vi-nappaimet-shellikaytossa">Vi-näppäimet&#160;shellikäytössä</a></span> &#183; <span class="published">2010-04-11</span>
<br /><span class="smallexcerpt">Vi-näppäimet toimivat parhaiten tavallisen proosan kirjoittamisessa. Myöhemmin, vähemmän parhaiten se toimii esimerkiksi koodikielten kanssa. Ehkä huonoiten se pelaa brainfuckin ja...</span>
</li>

</ul>

    </div>


<!-- footer -->
	<div id="foot">&nbsp;</div>

</div>

</body>
</html>
