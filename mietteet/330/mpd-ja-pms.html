<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


        <!-- standard -->
	<title>Mr. P: MPD ja PMS</title>


	<link rel="home" href="../../index.html" />

	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="../../atom/index.html?section=mietteet" />
	<link rel="alternate" type="application/rss+xml" title="RSS 0.92" href="../../rss/index.html?section=mietteet" />

	<link rel="stylesheet" type="text/css" media="screen" href="../../blog.css" />
        <link rel="stylesheet" type="text/css" href="../../codeblock.css" />

            <!-- SyntaxHighlighter: http://alexgorbatchev.com -->
    <script type="text/javascript" src="../../scripts/xregexp-min.js"></script>
    <script type="text/javascript" src="../../scripts/shCore.js"></script>
    <!-- langs -->
    <script type="text/javascript" src="../../scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPerl.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushClojure.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushHaskell.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushVimscript.js"></script>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../rpc/index.html" />
</head>

<body id="mietteet">

<!-- accessibility -->
<div id="accessibility">
    <ul>
        <li><a href="mpd-ja-pms#content">Siirry sisältöön</a></li>
        <li><a href="mpd-ja-pms#sidebar-2">Siirry hakuun</a></li>
    </ul>
</div>

<div id="container">

<!-- head -->
    <div id="head">
        <h1 id="site-name"><a rel="home" href="../../index.html">Mr. P</a></h1>
        <p id="site-slogan">Asiaa porjoilun tuolta puolen</p>
    </div>

<!-- right -->
    <div id="sidebar-2">
        <ul class="section_list">
	<li>
            
            <a href="../../hetket/index.html">Hetkessä</a>
            
        </li>
	<li>
            
            <a href="../../matematiikka/index.html">Matematiikka</a>
            
        </li>
	<li>
            &raquo;
            <a href="../index.html">Mietteet</a>
            
                <!--<ul>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/598/blogille-idea.html">Blogille&#160;idea</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/597/wes-mckinney-python-for-data-analysis-oreilly.html">Wes McKinney - Python For Data Analysis (O&#39;Reilly)</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/596/org-blogaaminen-vaikeata.html">Org-blogaaminen&#160;vaikeata</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/595/twitterointia-emacsilla.html">Twitteröintiä&#160;Emacsilla</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/594/weboodi-aikataulut-orgiin.html">WebOodi-aikataulut&#160;orgiin</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/593/emacsin-salat-alkavat-selvita-org-kovenee-ja-muita-tarinoita.html">Emacsin salat alkavat selvitä; org kovenee ja muita&#160;tarinoita</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/592/emacs-has-me.html">Emacs has&#160;me.</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/591/editorien-taistelu-tietamyshallinnassa.html">Editorien taistelu&#160;tietämyshallinnassa</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/590/think-vimorganizer.html">Think&#160;VimOrganizer.</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/589/think-orgmode.html">Think&#160;orgmode.</a>
                </li>
</ul>-->
            
        </li>
</ul>
<!--        <p class="sidebarhead">Aiheita:</p>
        <ul class="category_list">
	<li><a href="/kategoria/hifi/">Hifi</a></li>
	<li><a href="/kategoria/koodaus/">Ohjelmointi</a></li>
	<li><a href="/kategoria/ohjelmistot/">Ohjelmistot</a></li>
	<li><a href="/kategoria/Opiskelu/">Opiskelu</a></li>
	<li><a href="/kategoria/rauta/">Rauta</a></li>
	<li><a href="/kategoria/viihde/">Viihde</a></li>
	<li><a href="/kategoria/Yleistae-turinaa/">Yleistä turinaa</a></li>
</ul> -->

        <p class="sidebarhead">Valikoituja aiheita:</p>
        <ul class="category_list">
	<li><a href="../../tag/blogisäätöä/index.html" class="tagSizeMedium tagSize9" style="font-size: 100%;">blogisäätöä</a></li>
	<li><a href="../../tag/gentoo/index.html" class="tagSizeLargest tagSize89" style="font-size: 100%;">gentoo</a></li>
	<li><a href="../../tag/hifi/index.html" class="tagSizeMedium tagSize15" style="font-size: 100%;">hifi</a></li>
	<li><a href="../../tag/musiikki/index.html" class="tagSizeMedium tagSize7" style="font-size: 100%;">musiikki</a></li>
	<li><a href="../../tag/ohjelmointi/index.html" class="tagSizeMedium tagSize26" style="font-size: 100%;">ohjelmointi</a></li>
	<li><a href="../../tag/opiskelu/index.html" class="tagSizeSmallest tagSize1" style="font-size: 100%;">opiskelu</a></li>
	<li><a href="../../tag/palvelin/index.html" class="tagSizeMedium tagSize21" style="font-size: 100%;">palvelin</a></li>
	<li><a href="../../tag/vim/index.html" class="tagSizeMedium tagSize18" style="font-size: 100%;">vim</a></li>
</ul>
        <p><a href="../../tag/index.html">Kaikki tagit</a></p>

        <form method="get" action="../../index.html">
<p class="search_input">Hae<br /><input type="text" value="" name="q" size="15" /></p>
</form>

        <p><a href="../../rss/index.html?section=mietteet" title="RSS 0.92">RSS</a> / <a href="../../atom/index.html?section=mietteet" title="Atom 1.0">Atom</a></p>
        <p class="linklist"><a href="http://textpattern.net/">TextBook</a><br /><a href="http://textpattern.com/">Textpattern</a><br /><a href="http://textpattern.org/">Txp Resources</a><br /><a href="http://twitter.com/progo_" title="Twitter-profiilini">Twitter</a><br /></p>

        <p><a href="http://textpattern.com/"><img src="../../images/2.png" alt="Textpattern CMS" width="105" height="45" /></a></p>
    </div>


<!-- center -->
    <div id="content">



<!-- not tag view, it's the main view -->


        

        <div class="hfeed">
            <!-- five articles to list here, or only one. It depends. -->
            <!-- default form -->

<p class="published">18. elokuu 2010, 16:39</p>
<h1 class="entry-title"><a rel="bookmark" href="mpd-ja-pms">MPD ja&#160;PMS</a></h1>


<div class="entry-content">
	<p>Selailin tänään(kin) ajankulukseni Stack Overflow&#8217;n ketjuja, kun huomasin aika <a href="http://stackoverflow.com/questions/779348/vim-movement-on-other-programs/">mielenkiintoisen ketjun</a> erilaisista ohjelmista Vim-näppäinyhdistelmin. Olin melkein törmätä täydelliseen <span class="caps">MPD</span>-klienttiin, <a href="http://pms.sourceforge.net/"><span class="caps">PMS</span>:ään</a>, mutta se sitten kaatuu pikkuvikoihin. Ajatukseni kääntyvät takaisin alkuvuodesta aloitettuun ja jäädytettyyn <span class="caps">MPD</span>-kirjastoprojektiin ja omaan klienttiin. Ehkä tyrkkään kirjaston kirjoittamisen pois, ja tyydyn tehtailemaan C-kielisellä rajapinnalla C++:aa. Tai sitten vaihdankin pythoniin, joka on nyt ollut kovasti pinnalla.</p>

	<p><strong>Ties</strong> kuinka monetta kertaa tänäänkin <span class="caps">GMPC</span>:tä hypisteltyäni ja albumeita selailessani olisi tehnyt kova mieli ja tarve käytellä pelkkää näppäimistöä kivaan ja rentoon selailuun, mutta kun ei. <span class="caps">GMPC</span> on toistaiseksi paras kompromissi kaiken suhteen: kevyt, näppärä, albumipohjainen haku, melko käytettävä, nopea. Sitä ei kuitenkaan hiirettä käytellä, mikä vaatii oikaisua. Tänään silmään sattui varteenotettava haastaja, <span class="caps">PMS</span>.</p>

	<h2>Practical Music Search</h2>

	<p><span class="caps">PMS</span> on ncurses-pohjainen <span class="caps">MPD</span>-klientti, jossa on vahva Vim-taipumus ja kova kustomoitavuus. Gentoossa valmiin paketin asennettuani sain ohjelman oletusarvoineen auki, mutta meni hyvän aikaa löytää esimerkiksi soittolistalle lisäys tai ylipäätään mediakirjasto, missä sekin on. Näppäimetkin oli piilotettu &#8220;epäloogisesti&#8221; F1:n taakse.</p>

	<p>Man-page toimii pääasiallisena dokumenttina ohjelmalle. Sen turvin sain tehtyä pari kustomointia (jotka muuten tehdään tiedostoon <code>~/.config/pms/rc</code>):</p>

<pre><code></code></pre>

	<p>Vähän vimimäisemmät näppäinyhdistelmät. Vimin <code>v</code> visual-moodista melkein täsmää tämän ohjelman valintaoperaatiota. Ja näppäin <code>d</code> kappaleen taikka valinnan poistamiselle listoilta on ihan itsestäänselvyys: jostain syystä ohjelman kehittäjä oli jättänyt vain Delete-näppäimen käyttöön. Muutoin oletukset ovat aika hyvät. Mitä nyt soittolistaa ei saa tyhjennettyä suoraan. Voisin kai kuvata ison <code>C</code>-kirjaimen &#8220;clear listille&#8221;, mutta tämänhetkinen C on kuvattu toiminnolle, jossa kropataan lista tyhjäksi senhetkistä kappaletta lukuunottamatta. Näin ollen <code>Cd</code> toimii clearina tällä hetkellä.</p>

	<h3>Mikä vikana?</h3>

	<p><span class="caps">PMS</span> syyllistyy samaan lyhytnäköisyyteen kuin moni muukin musiikinsoittaja. Albumeita ja artisteja voi toki lajitella järkevästi, mutta jos albumilla on useita eri esittäjiä, nimet on lajiteltu päin persettä. Ei sinänsä vielä mitään ongelmaa, sillä <span class="caps">PMS</span> tekee paremmin kuin esimerkiksi <span class="caps">GMPC</span>: painamalla <code>b</code>:tä jonkun kappaleen kohdalla se heittää soittolistalle kaikki albumin raidat, myös sellaiset, joissa on eri esittäjä (<span class="caps">GMPC</span> ei tee tätä). Hyvä, hyvä. Mutta mitäs silmäni näkevätkään? Soittolistalla kappaleet on lajiteltu esittäjän mukaan, kuten kirjastossa. Eikä niitä saa mitenkään raitajärjestykseen muuten kuin itse manuaalisesti siirtelemällä. Kuinka törkeä omissio.</p>

	<p>Nappasin jo alustavasti git-repon ylös, mutta koodi on kehnon näköistä, huonosti kommentoitua ja se vaatii vähän paneutumista. </p>

	<p>Mieleni kääntyykin hyvin nopeasti kohti sitä omaa C++-kirjastoa ja C++-asiakasta. Stroustrupin kirjan johdolla loisin järkevän ja vikasietoisen oliomallin, jossa homma pelaisi tiukalla byrokratialla, mutta oikein.</p>

	<h2>Vaihtoehtoiset kielet</h2>

	<p>Hommaan en ole juuri muuta ajatellut kuin tätä C++:aa. Kuitenkin olisi hupsua olla tarkastamatta nyt paljon kirjoittelemaani Pythonia tai vaikkapa Haskellia (etenkin kun Haskellille on kirjoitettu jo <span class="caps">MPD</span>-kirjastomoduli). Pythonissakaan ei olisi mitään suurta vikaa. Sen löysä tyyppitarkastus ei vain miellytä samalla tavalla kuin staattisesti tyypitettyjen kielien vastaavat. C++:ssa on vetovoimansa. Tällä hetkellä se vetovoima tässä tapauksessa vain kovasti häivenee huonon kirjaston takia (libmpdclient, C-kielinen). Paketointi C++-luokiksi kuitenkin auttaisi roimasti, jos sen saa tehtyä vikasietoiseksi ja toimintavarmaksi. Uskoisin ainakin, ei se uudelleenkirjoittelu niin työläs ole. Kirjastohan on pienensutjakka. <a href="../323/mpd-kirjastoja-ja-asiakkaita">Kirjoittelin aiheesta</a> kesäkuussa hieman.</p>
</div>

<p class="tags"> 


Tageja: <a href="../../tag/c++/index.html" rel="tag">c++</a>, 
<a href="../../tag/ohjelmointi/index.html" rel="tag">ohjelmointi</a>


</p>



<div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>


        </div>

 <!-- now, common stuff -->

        <div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>

        <p><a rel="prev" href="../329/kohti-absoluuttista-hiljaisuutta-osa-2" title="Kohti absoluuttista hiljaisuutta, osa 2">&#171; Kohti absoluuttista hiljaisuutta, osa 2</a> 
           &mdash; <a rel="next" href="../331/kohti-absoluuttista-hiljaisuutta-osa-3" title="Kohti absoluuttista hiljaisuutta, osa 3">Kohti absoluuttista hiljaisuutta, osa 3 &#187;</a>
        </p>

        <div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>
        <h2>Aiheen vierestä</h2>
        <ul class="directory">

<li><span class="entry-title"><a rel="bookmark" href="../587/tehokkaat-kayttoliittymat-vaivatta">Tehokkaat käyttöliittymät&#160;vaivatta</a></span> &#183; <span class="published">2012-08-16</span>
<br /><span class="smallexcerpt">Ohjelmoijan onni on elää komentorivillä. Tehokkaiden käyttöliittymien rustaaminen on varsin nopeata, kunhan luottaa siihen, että suurta suosiota tuotokset eivät tule...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../584/pythonin-vastaisku-lispeille-ipython-ja-vim-ipython">Pythonin vastaisku lispeille: IPython ja vim-ipython</a></span> &#183; <span class="published">2012-07-25</span>
<br /><span class="smallexcerpt">Tai &#8220;Pythonin uusi toivo&#8221; tai &#8220;Pythonin paluu&#8221;. Mistä on kyse? Pythonin tulkin me kaikki kai tiedämme: kaikki siinä periaatteessa on,...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../581/sumitup-puutteet-ja-mihin-suuntaan-edetaan">SumItUp: puutteet ja mihin suuntaan&#160;edetään</a></span> &#183; <span class="published">2012-07-12</span>
<br /><span class="smallexcerpt">Esittelin pari postausta sitten Soulver-kloonin raakileen, SumItUpin. Nyt se on GitHubissa kaikkien pällisteltävänä ja sellaisella raakileasteella, jotta sitä voi jo...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../579/soulver-kloonia-rakentelemassa">Soulver-kloonia&#160;rakentelemassa</a></span> &#183; <span class="published">2012-07-07</span>
<br /><span class="smallexcerpt">Erittäin upealla konseptilla varustettu laskinohjelma Soulver kaatuu siihen, että sen saa vain Mäkille. Vapaamuotoinen näpertelyalusta on usein ainut asia, mitä...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../566/terminaaleja-vimista-kasin">Terminaaleja Vimistä&#160;käsin</a></span> &#183; <span class="published">2012-02-11</span>
<br /><span class="smallexcerpt">Vanha kunnon ConqueTerm on nyt valmis ja käyttökelpoinen tuote kehittelyyn.

	Olen viime päivinä alkanut käyttää vimiä hyvin emacsmaisesti. Se on tietenkin...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../565/mita-on-kehittaa-clojurella">Mitä on kehittää&#160;Clojurella</a></span> &#183; <span class="published">2012-02-05</span>
<br /><span class="smallexcerpt">C- ja muunkielisissä projekteissa tavataan kirjoittaa koodia ensin, ja sitten testataan. Tietysti vaatimus osittain syntyy koodin kääntämisestä; ilman kääntöä ei...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../564/ranskalaisten-viivojen-parsimista-clojurella">Ranskalaisten viivojen parsimista&#160;Clojurella</a></span> &#183; <span class="published">2012-02-02</span>
<br /><span class="smallexcerpt">Kirjoitin männäviikolla kokeilumielessä ohjelman, joka kääntää ranskalaiset viivat Beamer-Latexiksi. Ideana olisi tuottaa esityksen lihapuoli nopeasti rustaamalla tiivistä merkintää ja sitten...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../556/korintaytto-ja-ahne-menetelma">Korintäyttö ja ahne&#160;menetelmä</a></span> &#183; <span class="published">2011-10-23</span>
<br /><span class="smallexcerpt">Mietiskelen tässä korintäyttöä (bin packing) ja sitä, miten ahne menetelmä on joko ylipolynomiaalinen tai sitten epäoptimaalinen.  Luultavasti se on...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../551/tekijoita-clojurella">Tekijöitä&#160;Clojurella</a></span> &#183; <span class="published">2011-09-17</span>
<br /><span class="smallexcerpt">Nyt olen joutunut opiskelemaan tuota lukuteoriaa ja sen alkeita, ja monet niistä teorioista ovat innoittaneet minulle pieniä Clojure-ohjelmia. Se pää...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../547/pieni-tiedostolistausapu">Pieni&#160;tiedostolistausapu</a></span> &#183; <span class="published">2011-09-04</span>
<br /><span class="smallexcerpt">Pitäisi viritellä joku zsh-funktio tekemään seuraavanlaisia tiedostolistauksia nykyisestä hakemistosta:

$ ls -1
foo.txt
bar.txt
paperi.tex
vanhapaperi.tex.gz
$ l .txt
foo.txt
bar.txt
$ l peri
paperi.tex
vanhapaperi.tex.gz
$ l v*p
vanhapaperi.tex.gz
$ ls $files
vanhapaperi.tex.gz


	Eli sen...</span>
</li>

</ul>

    </div>


<!-- footer -->
	<div id="foot">&nbsp;</div>

</div>

</body>
</html>
