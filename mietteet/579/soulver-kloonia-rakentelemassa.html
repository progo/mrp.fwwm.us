<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


        <!-- standard -->
	<title>Mr. P: Soulver-kloonia rakentelemassa</title>


	<link rel="home" href="../../index.html" />

	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="../../atom/index.html?section=mietteet" />
	<link rel="alternate" type="application/rss+xml" title="RSS 0.92" href="../../rss/index.html?section=mietteet" />

	<link rel="stylesheet" type="text/css" media="screen" href="../../blog.css" />
        <link rel="stylesheet" type="text/css" href="../../codeblock.css" />

            <!-- SyntaxHighlighter: http://alexgorbatchev.com -->
    <script type="text/javascript" src="../../scripts/xregexp-min.js"></script>
    <script type="text/javascript" src="../../scripts/shCore.js"></script>
    <!-- langs -->
    <script type="text/javascript" src="../../scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPerl.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushClojure.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushHaskell.js"></script>
    <script type="text/javascript" src="../../scripts/shBrushVimscript.js"></script>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../rpc/index.html" />
</head>

<body id="mietteet">

<!-- accessibility -->
<div id="accessibility">
    <ul>
        <li><a href="soulver-kloonia-rakentelemassa#content">Siirry sisältöön</a></li>
        <li><a href="soulver-kloonia-rakentelemassa#sidebar-2">Siirry hakuun</a></li>
    </ul>
</div>

<div id="container">

<!-- head -->
    <div id="head">
        <h1 id="site-name"><a rel="home" href="../../index.html">Mr. P</a></h1>
        <p id="site-slogan">Asiaa porjoilun tuolta puolen</p>
    </div>

<!-- right -->
    <div id="sidebar-2">
        <ul class="section_list">
	<li>
            
            <a href="../../hetket/index.html">Hetkessä</a>
            
        </li>
	<li>
            
            <a href="../../matematiikka/index.html">Matematiikka</a>
            
        </li>
	<li>
            &raquo;
            <a href="../index.html">Mietteet</a>
            
                <!--<ul>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/598/blogille-idea.html">Blogille&#160;idea</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/597/wes-mckinney-python-for-data-analysis-oreilly.html">Wes McKinney - Python For Data Analysis (O&#39;Reilly)</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/596/org-blogaaminen-vaikeata.html">Org-blogaaminen&#160;vaikeata</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/595/twitterointia-emacsilla.html">Twitteröintiä&#160;Emacsilla</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/594/weboodi-aikataulut-orgiin.html">WebOodi-aikataulut&#160;orgiin</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/593/emacsin-salat-alkavat-selvita-org-kovenee-ja-muita-tarinoita.html">Emacsin salat alkavat selvitä; org kovenee ja muita&#160;tarinoita</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/592/emacs-has-me.html">Emacs has&#160;me.</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/591/editorien-taistelu-tietamyshallinnassa.html">Editorien taistelu&#160;tietämyshallinnassa</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/590/think-vimorganizer.html">Think&#160;VimOrganizer.</a>
                </li>
	<li>
                    
                    <a rel="bookmark" href="/mietteet/589/think-orgmode.html">Think&#160;orgmode.</a>
                </li>
</ul>-->
            
        </li>
</ul>
<!--        <p class="sidebarhead">Aiheita:</p>
        <ul class="category_list">
	<li><a href="/kategoria/hifi/">Hifi</a></li>
	<li><a href="/kategoria/koodaus/">Ohjelmointi</a></li>
	<li><a href="/kategoria/ohjelmistot/">Ohjelmistot</a></li>
	<li><a href="/kategoria/Opiskelu/">Opiskelu</a></li>
	<li><a href="/kategoria/rauta/">Rauta</a></li>
	<li><a href="/kategoria/viihde/">Viihde</a></li>
	<li><a href="/kategoria/Yleistae-turinaa/">Yleistä turinaa</a></li>
</ul> -->

        <p class="sidebarhead">Valikoituja aiheita:</p>
        <ul class="category_list">
	<li><a href="../../tag/blogisäätöä/index.html" class="tagSizeMedium tagSize15" style="font-size: 100%;">blogisäätöä</a></li>
	<li><a href="../../tag/gentoo/index.html" class="tagSizeLargest tagSize95" style="font-size: 100%;">gentoo</a></li>
	<li><a href="../../tag/hifi/index.html" class="tagSizeMedium tagSize21" style="font-size: 100%;">hifi</a></li>
	<li><a href="../../tag/ohjelmointi/index.html" class="tagSizeMedium tagSize32" style="font-size: 100%;">ohjelmointi</a></li>
	<li><a href="../../tag/opiskelu/index.html" class="tagSizeMedium tagSize7" style="font-size: 100%;">opiskelu</a></li>
	<li><a href="../../tag/ostoksia/index.html" class="tagSizeSmallest tagSize1" style="font-size: 100%;">ostoksia</a></li>
	<li><a href="../../tag/rauta/index.html" class="tagSizeMedium tagSize13" style="font-size: 100%;">rauta</a></li>
	<li><a href="../../tag/vim/index.html" class="tagSizeMedium tagSize24" style="font-size: 100%;">vim</a></li>
</ul>
        <p><a href="../../tag/index.html">Kaikki tagit</a></p>

        <form method="get" action="../../index.html">
<p class="search_input">Hae<br /><input type="text" value="" name="q" size="15" /></p>
</form>

        <p><a href="../../rss/index.html?section=mietteet" title="RSS 0.92">RSS</a> / <a href="../../atom/index.html?section=mietteet" title="Atom 1.0">Atom</a></p>
        <p class="linklist"><a href="http://textpattern.net/">TextBook</a><br /><a href="http://textpattern.com/">Textpattern</a><br /><a href="http://textpattern.org/">Txp Resources</a><br /><a href="http://twitter.com/progo_" title="Twitter-profiilini">Twitter</a><br /></p>

        <p><a href="http://textpattern.com/"><img src="../../images/2.png" alt="Textpattern CMS" width="105" height="45" /></a></p>
    </div>


<!-- center -->
    <div id="content">



<!-- not tag view, it's the main view -->


        

        <div class="hfeed">
            <!-- five articles to list here, or only one. It depends. -->
            <!-- default form -->

<p class="published"> 7. heinäkuu 2012, 17:58</p>
<h1 class="entry-title"><a rel="bookmark" href="soulver-kloonia-rakentelemassa">Soulver-kloonia&#160;rakentelemassa</a></h1>


<div class="entry-content">
	<p>Erittäin upealla konseptilla varustettu laskinohjelma <a href="http://www.acqualia.com/soulver/">Soulver</a> kaatuu siihen, että sen saa vain Mäkille. Vapaamuotoinen näpertelyalusta on usein ainut asia, mitä laskimestani kaipaa. Ja erityisesti listata selväkielisesti jotain asioita ja lukuarvoja, ja saada niistä summaus selvästi esille. Eikä sellaista voi edes isommilla ohjelmilla kuten Maplella kunnolla emuloida. Koska Mäkkiä en nyt viitsi ostaa pelkän yhden sovelluksen takia, on jäljellä vaihtoehto kirjoittaa oma Soulver-like.</p>

	<p>Ensin puntaroin <span class="caps">GUI</span>-ohjelman perään: asialle laitettaisiin Clojure ja Swing-kirjasto. Sitten tulin järkiini, ja pohdin <span class="caps">TUI</span>-ohjelmaa: Python ja ncurses-kirjasto. Yhtä nopeasti säpsähdin siitäkin, sillä vapaamuotoisen kirjoittelualustan olisi syytä olla parempi kuin huonompi. Välitön seuraus: projekti rakennetaan Vimin päälle. Vim tarjoaa editointikomennot, syntaksivärityksen ja Python-integraation. Kehittelyn aloitan Python-parsimen kanssa siten, että voin komentoriviltä käsin testailla. Sitten kun homma alkaa luistaa kunnolla, integroin sen vain vim-puskuriin sopivan skriptin kanssa, ja meillä on valmiina uusi Vim-skripti. Emacsissa on jo org-table, joka osaa tehdä about samoja asioita kuin tämä. Alusta ja kieli on täten valittu.</p>

	<p>Mitä asioita tällä valitsemallani tiellä voidaan saavuttaa? Ensinnäkin pitäytyen puhtaassa tekstissä menetän esteettisyyttä, mutta saan tilalle ääriluotettavaa laskentaa. Kaikkea voi seurata tarkkaan tekstistä, ja tietokone ei näe sen enempää kuin ihmissilmä. <span class="caps">WYSIAG</span>-ilmiöltä säästytään. Rivejä voi kommentoida nopeasti mitätöimään jokin tietty termi. Lopulliseen ratkaisuun ajattelin myös nimettyjä muuttujia, jolloin ykskaks yllättäen tämä pikku projekti vastaakin sitä rakenteista taulukkolaskentaa, josta <a href="../570/rakenteiset-taulukkolaskennat">haaveilin muutama kuukausi</a> sitten.</p>

	<p>Liian hyvää ollakseen totta? No, toistaiseksi kaikki näyttää valoisalta. Olen hakkaillut python-purkkaa noin satarivisen paketin kasaan. Seuraavanlainen testidemo, mitä skripti tällä hetkellä konkreettisesti osaa tehdä:</p>

<pre>hifit                       2000 €
penkit                      &lt;4*250&gt; €
jako kahteen                &lt;2000/4&gt; €

kaikki yhteensä             &lt;@sum&gt; €
puoliksi                    &lt;@sum/2&gt; €
vakuutusyhtiö korvaa        &lt;@sum * 0.85 -150&gt; €
</pre>

	<p>Muuttuu tämännäköiseksi skriptin läpi ujutettuna:</p>

<pre>hifit                       2000 €
penkit                      &lt;4*250 = 1000&gt; €
jako kahteen                &lt;2000/4 = 500.0&gt; €

kaikki yhteensä             &lt;@sum = 3500.0&gt; €
puoliksi                    &lt;@sum/2 = 1750.0&gt; €
vakuutusyhtiö korvaa        &lt;@sum * 0.85 -150 = 2825.0&gt; €
</pre>

	<p>Tätä on tarkoitus sitten pyöritellä interaktiiviseen suuntaan valmistuttuaan. Python-skripti on toistaiseksi one-pass -metodiikalla kirjoitettu. Syntaksi on hieman avoinna vielä, ja lukuarvojen poiminta on puutteellinen. Vain rivin viimeinen lukuarvo otetaan mukaan summattavaksi (keskeinen <code>sum</code>-komento).</p>

	<p>Syntaksia pitäisi miettiä tarkempaan läpi ja one-pass -semantiikan hyvät puolet haluaisin säilyttää&#8230; esimerkiksi sen, että <code>sum</code>-komentoa voi komennella välisummien antamiseksi keskellä laskuja, eikä se häiritse myöhempiä summia.</p>

	<p>Ja ne regexitkin ovat varmasti puutteellisia. Kulmasulkeetkin voivat olla rumia, joskin vimin conceal-toiminnon avulla ne voisi halutessaan piilottaa.  Tämä idea on niin avoinna toistaiseksi, että minun pitäisi ensin lyödä syntaksi kiveen ja sitten voisin aloittaa yksikkötestien ja lopullisen suunnitelman aukikirjoittamista.</p>

	<p>Nyt on paras aika kommentoida, ja jos kovastikin kiinnostaa, niin pusken tämän githubiin näin raakilevaiheessa.</p>
</div>

<p class="tags"> 


Tageja: <a href="../../tag/koodailu/index.html" rel="tag">koodailu</a>, 
<a href="../../tag/ohjelmointi/index.html" rel="tag">ohjelmointi</a>, 
<a href="../../tag/python/index.html" rel="tag">python</a>, 
<a href="../../tag/vim/index.html" rel="tag">vim</a>


</p>



<div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>


        </div>

 <!-- now, common stuff -->

        <div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>

        <p><a rel="prev" href="../578/uusia-hifinakymia" title="Uusia hifinäkymiä">&#171; Uusia hifinäkymiä</a> 
           &mdash; <a rel="next" href="../580/luonnontieteiden-kandidaatti" title="Luonnontieteiden kandidaatti">Luonnontieteiden kandidaatti &#187;</a>
        </p>

        <div class="divider"><img src="../../images/1.gif" alt="---" width="400" height="1" /></div>
        <h2>Aiheen vierestä</h2>
        <ul class="directory">

<li><span class="entry-title"><a rel="bookmark" href="../597/wes-mckinney-python-for-data-analysis-oreilly">Wes McKinney - Python For Data Analysis (O&#39;Reilly)</a></span> &#183; <span class="published">2012-11-30</span>
<br /><span class="smallexcerpt">O&#8217;Reillyn hienon blogiohjelman kautta ilmaiseksi saamani kirja kertoo tyydyttävästi kaikenlaista, mitä Matlabia ja R:ää kammoksuva haluaa tietää! Tässä tapailen mietteitä...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../594/weboodi-aikataulut-orgiin">WebOodi-aikataulut&#160;orgiin</a></span> &#183; <span class="published">2012-10-23</span>
<br /><span class="smallexcerpt">Itä-Suomen yliopiston weboodissa alkaa olla aika usein kurssi-infot hyvässä kunnossa, ja nyt on myös joensuulaisille olemassa tuota lukkaria, joka on...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../593/emacsin-salat-alkavat-selvita-org-kovenee-ja-muita-tarinoita">Emacsin salat alkavat selvitä; org kovenee ja muita&#160;tarinoita</a></span> &#183; <span class="published">2012-10-17</span>
<br /><span class="smallexcerpt">Tässä on ihmetelty jo hyvän aikaa uusissa maailmoissa, ja pitkälle on päästy. En olisi itsestäni uskonut, että Emacsissa ollaan jonain...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../592/emacs-has-me">Emacs has&#160;me.</a></span> &#183; <span class="published">2012-09-22</span>
<br /><span class="smallexcerpt">Emacs alkaa ottaa otetta minusta. Olen yrittänyt olla pyristelemättä vastaan, eikä ole asiaa vastaan mitään sanottavaa. Kaikki ne herkut ja...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../591/editorien-taistelu-tietamyshallinnassa">Editorien taistelu&#160;tietämyshallinnassa</a></span> &#183; <span class="published">2012-09-14</span>
<br /><span class="smallexcerpt">Kun päädyin pari viikkoa sitten Org-formaattiin, oli se luonnollisesti edellytys, että Vim ja sen VimOrganizer saadaan kuntoon. Nyt kuitenkin on...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../590/think-vimorganizer">Think&#160;VimOrganizer.</a></span> &#183; <span class="published">2012-09-02</span>
<br /><span class="smallexcerpt">Asiat rullaavat eteenpäin tyydyttävää tahtia tämän uuden tiedonhallinnan kanssa. Nyt olen säätänyt kuntoon jokaisesta kulmasta toimivan org-capture -variantin, jolla saan...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../589/think-orgmode">Think&#160;orgmode.</a></span> &#183; <span class="published">2012-08-31</span>
<br /><span class="smallexcerpt">Teemme taas täyden ympyrän palatessamme orgmodeen, tuohon viha-rakkaussuhteen saaneeseen pakettiin. Edellinen thinktank-idea lopulta vääntyy siihen, että voin joko tehdä simppelin...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../588/think">Think.</a></span> &#183; <span class="published">2012-08-21</span>
<br /><span class="smallexcerpt">Hyvät ideat menevät usein hukkaan joko hajaantumisen tai unohtamisen merkeissä. Lyhyilläkin ajatuksilla on kovasti arvoa, jos useampi sellainen muodostaakin fiksuja...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../587/tehokkaat-kayttoliittymat-vaivatta">Tehokkaat käyttöliittymät&#160;vaivatta</a></span> &#183; <span class="published">2012-08-16</span>
<br /><span class="smallexcerpt">Ohjelmoijan onni on elää komentorivillä. Tehokkaiden käyttöliittymien rustaaminen on varsin nopeata, kunhan luottaa siihen, että suurta suosiota tuotokset eivät tule...</span>
</li>



<li><span class="entry-title"><a rel="bookmark" href="../584/pythonin-vastaisku-lispeille-ipython-ja-vim-ipython">Pythonin vastaisku lispeille: IPython ja vim-ipython</a></span> &#183; <span class="published">2012-07-25</span>
<br /><span class="smallexcerpt">Tai &#8220;Pythonin uusi toivo&#8221; tai &#8220;Pythonin paluu&#8221;. Mistä on kyse? Pythonin tulkin me kaikki kai tiedämme: kaikki siinä periaatteessa on,...</span>
</li>

</ul>

    </div>


<!-- footer -->
	<div id="foot">&nbsp;</div>

</div>

</body>
</html>
